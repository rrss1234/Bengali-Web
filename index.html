<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Best IPTV PRO | Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --bg: #0b0e14;
            --sidebar: #151921;
            --card: #1c222d;
            --accent: #00d2ff;
            --accent-grad: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
            --text: #ffffff;
            --text-dim: #94a3b8;
            --border: rgba(255, 255, 255, 0.08);
            --danger: #ff4757;
            --success: #2ed573;
            --glass: rgba(255, 255, 255, 0.03);
        }

        [data-theme="light"] {
            --bg: #f8fafc;
            --sidebar: #ffffff;
            --card: #ffffff;
            --text: #0f172a;
            --text-dim: #64748b;
            --border: #e2e8f0;
            --glass: rgba(0, 0, 0, 0.02);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: var(--text); height: 100vh; display: flex; overflow: hidden; }

        /* SIDEBAR */
        .sidebar { width: 280px; background: var(--sidebar); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 30px 20px; }
        .app-logo { display: flex; align-items: center; gap: 12px; margin-bottom: 40px; padding-left: 10px; }
        .app-logo i { font-size: 2.2rem; color: var(--accent); }
        .app-name { font-size: 1.4rem; font-weight: 800; background: var(--accent-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        .nav-menu { flex: 1; }
        .nav-label { font-size: 0.75rem; color: var(--text-dim); text-transform: uppercase; margin: 20px 0 10px 10px; font-weight: 600; }
        .nav-item {
            display: flex; align-items: center; gap: 12px; padding: 12px 16px; border-radius: 12px;
            color: var(--text-dim); text-decoration: none; margin-bottom: 4px; transition: 0.2s; cursor: pointer;
        }
        .nav-item:hover, .nav-item.active { background: var(--glass); color: var(--accent); }
        .nav-item.active { background: var(--accent-grad); color: white; }

        /* MAIN */
        .main-container { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        .top-bar { height: 80px; padding: 0 40px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--border); }
        .search-input { width: 350px; background: var(--card); border: 1px solid var(--border); padding: 12px 20px; border-radius: 12px; color: white; outline: none; }
        .content-area { flex: 1; padding: 40px; overflow-y: auto; }

        /* CARDS */
        .playlist-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
        .playlist-card { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 24px; position: relative; transition: 0.3s; cursor: pointer; }
        .playlist-card:hover { transform: translateY(-5px); border-color: var(--accent); }

        .fav-btn { position: absolute; top: 20px; right: 20px; font-size: 1.2rem; color: var(--text-dim); cursor: pointer; transition: 0.2s; }
        .fav-btn.active { color: var(--danger); }

        .btn-play { background: var(--accent-grad); color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 600; cursor: pointer; margin-top: 15px; width: 100%; }

        /* MODAL */
        .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); display: none; z-index: 1000; }
        .modal-content { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 450px; background: var(--card); border-radius: 20px; padding: 30px; border: 1px solid var(--border); display: none; z-index: 1001; }

        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 8px; color: var(--text-dim); }
        select, input { width: 100%; background: var(--bg); border: 1px solid var(--border); padding: 12px; border-radius: 10px; color: white; }
    </style>
</head>
<body data-theme="dark">

    <aside class="sidebar">
        <div class="app-logo">
            <i class="fas fa-play-circle"></i>
            <div class="app-name">Best IPTV PRO</div>
        </div>
        <nav class="nav-menu">
            <div class="nav-label">Main</div>
            <div class="nav-item active" id="btnHome"><i class="fas fa-columns"></i> Dashboard</div>
            <div class="nav-item" id="btnFav"><i class="fas fa-heart"></i> Favorites</div>
            <div class="nav-label">Settings</div>
            <div class="nav-item" id="themeToggle"><i class="fas fa-adjust"></i> Theme</div>
            <div class="nav-item" onclick="openPref()"><i class="fas fa-cog"></i> Preferences</div>
        </nav>
    </aside>

    <div class="main-container">
        <header class="top-bar">
            <input type="text" class="search-input" id="searchInput" placeholder="Search playlist...">
            <div id="statusHeader" style="font-weight: bold; color: var(--accent);">All Playlists</div>
        </header>

        <main class="content-area">
            <div class="playlist-grid" id="playlistGrid"></div>
        </main>
    </div>

    <div class="modal-backdrop" id="backdrop" onclick="closeModals()"></div>
    <div class="modal-content" id="prefModal">
        <h2 style="margin-bottom: 20px;">App Preferences</h2>
        <div class="form-group">
            <label>Default Video Quality</label>
            <select id="prefQuality">
                <option value="auto">Auto (Adaptive)</option>
                <option value="4k">4K Ultra HD</option>
                <option value="1080p">1080p Full HD</option>
                <option value="720p">720p HD</option>
            </select>
        </div>
        <div class="form-group">
            <label>Auto-play Next Channel</label>
            <select id="prefAutoplay">
                <option value="on">Enabled</option>
                <option value="off">Disabled</option>
            </select>
        </div>
        <button onclick="savePrefs()" class="btn-play">Save Settings</button>
    </div>

    <script>
        let showFavoritesOnly = false;
        
        const defaultServers = [
            { id: 's1', name: "Global Sports", url: "sports.m3u" },
            { id: 's2', name: "HD Movies", url: "movies.m3u" }
        ];

        function render() {
            const grid = document.getElementById('playlistGrid');
            const saved = JSON.parse(localStorage.getItem('user_playlists')) || [];
            const favorites = JSON.parse(localStorage.getItem('fav_playlists')) || [];
            const all = [...defaultServers, ...saved];
            const filter = document.getElementById('searchInput').value.toLowerCase();

            grid.innerHTML = '';
            
            all.forEach(p => {
                const isFav = favorites.includes(p.id);
                if (showFavoritesOnly && !isFav) return;
                if (!p.name.toLowerCase().includes(filter)) return;

                const card = document.createElement('div');
                card.className = 'playlist-card';
                card.innerHTML = `
                    <i class="fas fa-heart fav-btn ${isFav ? 'active' : ''}" onclick="toggleFav(event, '${p.id}')"></i>
                    <div style="font-size: 2.5rem; color: var(--accent); margin-bottom: 15px;"><i class="fas fa-tv"></i></div>
                    <h3>${p.name}</h3>
                    <p style="color: var(--text-dim); font-size: 0.8rem; margin-top: 5px;">${p.url}</p>
                    <button class="btn-play">Watch Now</button>
                `;
                grid.appendChild(card);
            });
        }

        // Favorites Logic
        function toggleFav(e, id) {
            e.stopPropagation();
            let favorites = JSON.parse(localStorage.getItem('fav_playlists')) || [];
            if (favorites.includes(id)) {
                favorites = favorites.filter(favId => favId !== id);
            } else {
                favorites.push(id);
            }
            localStorage.setItem('fav_playlists', JSON.stringify(favorites));
            render();
        }

        document.getElementById('btnFav').onclick = function() {
            showFavoritesOnly = true;
            this.classList.add('active');
            document.getElementById('btnHome').classList.remove('active');
            document.getElementById('statusHeader').innerText = "Favorite Playlists";
            render();
        };

        document.getElementById('btnHome').onclick = function() {
            showFavoritesOnly = false;
            this.classList.add('active');
            document.getElementById('btnFav').classList.remove('active');
            document.getElementById('statusHeader').innerText = "All Playlists";
            render();
        };

        // Preferences Logic
        function openPref() {
            document.getElementById('prefModal').style.display = 'block';
            document.getElementById('backdrop').style.display = 'block';
            
            // Load saved settings
            const prefs = JSON.parse(localStorage.getItem('app_prefs')) || { quality: 'auto', autoplay: 'on' };
            document.getElementById('prefQuality').value = prefs.quality;
            document.getElementById('prefAutoplay').value = prefs.autoplay;
        }

        function savePrefs() {
            const prefs = {
                quality: document.getElementById('prefQuality').value,
                autoplay: document.getElementById('prefAutoplay').value
            };
            localStorage.setItem('app_prefs', JSON.stringify(prefs));
            alert("Settings Saved!");
            closeModals();
        }

        function closeModals() {
            document.getElementById('prefModal').style.display = 'none';
            document.getElementById('backdrop').style.display = 'none';
        }

        document.getElementById('searchInput').oninput = render;
        render();
    </script>
</body>
</html>
